import{u as L,j as e}from"./vendor-data-BGC679gK.js";import{r as l,L as G}from"./vendor-react-CfDhA8Yr.js";import{C as i,c,a as h,b as p}from"./card-CR3ge8t2.js";import{B as b}from"./index-BGRFCdYG.js";import{I as j,f as J,a as V,g as W,b as X}from"./InteractiveChartContainer-C91VsEba.js";import{L as u}from"./label-BMvm8U3p.js";import{S as Y,g as ee,k as se}from"./StockAnalysisDialog-wb2Ji1wJ.js";import{i as te,Z as T,T as k,s as ae,q as B,f as le,h as re}from"./vendor-utils-DRjUCHJQ.js";import"./vendor-radix-DB-zNCEb.js";import"./vendor-charts-DVDma2PU.js";function je(){const[a,v]=l.useState(""),[r,C]=l.useState(""),[x,K]=l.useState(""),[d,A]=l.useState(""),[t,w]=l.useState("breakout"),[m,$]=l.useState(null),[E,_]=l.useState(!1),f=l.useRef(""),[P,R]=l.useState(0),{data:o}=L({queryKey:["tradingDate"],queryFn:ee,staleTime:5*6e4,refetchOnMount:"always"});l.useEffect(()=>{if(o!=null&&o.latest_trading_day){const s=o.latest_trading_day;(!a||a===f.current)&&v(s),(!r||r===f.current)&&C(s),f.current=s}},[o]);const I=()=>{R(s=>s+1)},{data:n,isLoading:O}=L({queryKey:["maBreakoutPage",a,r,x,d,t,P],queryFn:()=>se(a,r,x?parseFloat(x):void 0,d?parseFloat(d):void 0,t),enabled:!!a&&!!r}),N=(n==null?void 0:n.items)||[],z=(n==null?void 0:n.breakout_count)||0,Q=(n==null?void 0:n.total_days)||0,g=a!==r,Z=(s,y)=>{$({symbol:s,name:y}),_(!0)},H=()=>{_(!1),$(null)},U=()=>a?a===r?a:`${a} ~ ${r}`:"-";return e.jsxs("div",{className:"container mx-auto py-6 px-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(b,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(G,{to:"/",children:e.jsx(te,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(T,{className:"w-7 h-7 text-violet-400"}),"ç³¾çµå‡ç·šç¯©é¸"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"5/10/20æ—¥å‡ç·šåœ¨3%ç¯„åœå…§ç³¾çµï¼Œä»Šæ—¥æ”¶ç›¤çªç ´æˆ–è·Œç ´ï¼ˆå…¨å¸‚å ´ï¼‰"})]})]}),e.jsx(i,{className:"mb-6",children:e.jsxs(c,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{className:"flex items-center gap-1",children:"æ–¹å‘"}),e.jsxs("div",{className:"flex rounded-lg overflow-hidden border border-border",children:[e.jsxs("button",{onClick:()=>w("breakout"),className:`px-4 py-2 text-sm font-medium transition-colors flex items-center gap-1.5 ${t==="breakout"?"bg-emerald-500/20 text-emerald-400 border-emerald-500":"bg-muted/30 text-muted-foreground hover:bg-muted/50"}`,children:[e.jsx(k,{className:"w-3.5 h-3.5"})," çªç ´"]}),e.jsxs("button",{onClick:()=>w("breakdown"),className:`px-4 py-2 text-sm font-medium transition-colors flex items-center gap-1.5 border-l border-border ${t==="breakdown"?"bg-rose-500/20 text-rose-400 border-rose-500":"bg-muted/30 text-muted-foreground hover:bg-muted/50"}`,children:[e.jsx(ae,{className:"w-3.5 h-3.5"})," è·Œç ´"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"})," é–‹å§‹æ—¥æœŸ"]}),e.jsx(j,{type:"date",value:a,onChange:s=>v(s.target.value),className:"w-44"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"})," çµæŸæ—¥æœŸ"]}),e.jsx(j,{type:"date",value:r,onChange:s=>C(s.target.value),className:"w-44"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"æ¼²å¹…ä¸‹é™ (%)"}),e.jsx(j,{type:"number",step:"0.1",value:x,onChange:s=>K(s.target.value),className:"w-28",placeholder:"ä¸é™"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"æ¼²å¹…ä¸Šé™ (%)"}),e.jsx(j,{type:"number",step:"0.1",value:d,onChange:s=>A(s.target.value),className:"w-28",placeholder:"ä¸é™"})]}),e.jsxs(b,{onClick:I,className:"gap-1",children:[e.jsx(le,{className:"w-4 h-4"})," æŸ¥è©¢"]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx(k,{className:"w-4 h-4 mt-0.5 text-violet-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground",children:["ç³¾çµå‡ç·š",t==="breakout"?"çªç ´":"è·Œç ´","æ¢ä»¶ï¼š"]}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-0.5",children:[e.jsx("li",{children:"æ˜¨æ—¥ 5/10/20 æ—¥å‡ç·šç¯„åœåœ¨ 3% ä»¥å…§ï¼ˆç³¾çµï¼‰"}),e.jsxs("li",{children:["ä»Šæ—¥æ”¶ç›¤åƒ¹",t==="breakout"?"çªç ´æ‰€æœ‰å‡ç·š":"è·Œç ´æ‰€æœ‰å‡ç·š"]}),e.jsx("li",{children:"ç„¡å‘¨è½‰çŽ‡æŽ’åé™åˆ¶ï¼Œæœå°‹å…¨å¸‚å ´"})]})]})]})})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4 mb-6",children:[e.jsxs(i,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"æŸ¥è©¢æ—¥æœŸ"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-lg font-semibold",children:U()}),g&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["å…± ",Q," å¤©"]})]})]}),e.jsxs(i,{className:`border-l-4 ${t==="breakout"?"border-purple-500":"border-rose-500"}`,children:[e.jsx(h,{className:"pb-2",children:e.jsx(p,{className:`text-sm font-medium ${t==="breakout"?"text-violet-400":"text-rose-400"}`,children:t==="breakout"?"çªç ´ç³¾çµå‡ç·š":"è·Œç ´ç³¾çµå‡ç·š"})}),e.jsx(c,{children:e.jsxs("div",{className:`text-2xl font-bold ${t==="breakout"?"text-violet-400":"text-rose-400"}`,children:[z," æª”"]})})]}),e.jsxs(i,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"æœå°‹ç¯„åœ"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-lg font-semibold",children:"å…¨å¸‚å ´"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"ç„¡å‘¨è½‰çŽ‡é™åˆ¶"})]})]}),e.jsxs(i,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"ç¯©é¸æ¢ä»¶"})}),e.jsx(c,{children:e.jsx("div",{className:"text-sm",children:x&&d?`æ¼²å¹… ${x}% ~ ${d}%`:x?`æ¼²å¹… â‰¥ ${x}%`:d?`æ¼²å¹… â‰¤ ${d}%`:"ç„¡æ¼²å¹…é™åˆ¶"})})]})]}),e.jsxs(i,{children:[e.jsx(h,{className:"pb-2",children:e.jsxs(p,{className:"text-lg flex items-center justify-between",children:[e.jsxs("span",{className:`flex items-center gap-2 ${t==="breakout"?"text-violet-400":"text-rose-400"}`,children:[e.jsx(T,{className:"w-5 h-5"})," ",t==="breakout"?"çªç ´":"è·Œç ´","ç³¾çµå‡ç·šè‚¡ç¥¨"]}),e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["å…± ",N.length," ç­†"]})]})}),e.jsx(c,{className:"p-0",children:O?e.jsx("div",{className:"py-20 text-center text-muted-foreground animate-pulse",children:"è¼‰å…¥ä¸­..."}):N.length===0?e.jsx("div",{className:"py-20 text-center text-muted-foreground",children:"ç„¡ç¬¦åˆæ¢ä»¶çš„è‚¡ç¥¨ï¼Œè«‹èª¿æ•´ç¯©é¸æ¢ä»¶å¾Œé»žæ“Šã€ŒæŸ¥è©¢ã€"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/50 border-y",children:e.jsxs("tr",{children:[g&&e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"æ—¥æœŸ"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"ä»£è™Ÿ"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"åç¨±"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"ç”¢æ¥­"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"æ”¶ç›¤åƒ¹"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"æ¼²å¹…"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"å‘¨è½‰çŽ‡"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"æˆäº¤é‡"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"MA5"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"MA10"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"MA20"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"å‡ç·šç¯„åœ"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:"æ“ä½œ"})]})}),e.jsx("tbody",{className:"divide-y",children:N.map((s,y)=>{var S,D,F,q,M;return e.jsxs("tr",{className:"hover:bg-muted/30",children:[g&&e.jsx("td",{className:"px-3 py-3 text-xs text-muted-foreground",children:s.query_date||"-"}),e.jsx("td",{className:"px-3 py-3 font-mono",children:s.symbol}),e.jsxs("td",{className:"px-3 py-3",children:[s.name,e.jsx("span",{className:"ml-1",children:t==="breakout"?"âš¡":"ðŸ’¥"})]}),e.jsx("td",{className:"px-3 py-3 text-muted-foreground text-xs",children:s.industry||"-"}),e.jsx("td",{className:"px-3 py-3 font-mono",children:J(s.close_price)}),e.jsx("td",{className:`px-3 py-3 font-mono font-semibold ${W(s.change_percent)}`,children:V(s.change_percent)}),e.jsxs("td",{className:"px-3 py-3 font-mono text-blue-500",children:[((S=s.turnover_rate)==null?void 0:S.toFixed(1))||"-","%"]}),e.jsx("td",{className:"px-3 py-3 font-mono",children:X(s.volume)}),e.jsx("td",{className:"px-3 py-3 font-mono text-xs",children:((D=s.ma5)==null?void 0:D.toFixed(2))||"-"}),e.jsx("td",{className:"px-3 py-3 font-mono text-xs",children:((F=s.ma10)==null?void 0:F.toFixed(2))||"-"}),e.jsx("td",{className:"px-3 py-3 font-mono text-xs",children:((q=s.ma20)==null?void 0:q.toFixed(2))||"-"}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs ${t==="breakout"?"bg-purple-500/10 text-violet-400":"bg-rose-500/10 text-rose-400"}`,children:[((M=s.ma_range)==null?void 0:M.toFixed(1))||"-","%"]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>Z(s.symbol,s.name),className:"h-8 w-8 p-0",title:"æŸ¥çœ‹Kç·šåœ–",children:e.jsx(re,{className:"h-4 w-4"})})})]},`${s.symbol}-${s.query_date||y}`)})})]})})})]}),e.jsx(Y,{open:E,onClose:H,symbol:(m==null?void 0:m.symbol)||null,name:m==null?void 0:m.name})]})}export{je as MaBreakoutPage};
