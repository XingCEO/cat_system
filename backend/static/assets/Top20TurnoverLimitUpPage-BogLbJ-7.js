import{j as e,u as B,b as ce,f as G,g as oe,d as de,e as xe,h as me}from"./vendor-data-CkOiUkF9.js";import{a as d,L as Q}from"./vendor-react-CiXd1m8D.js";import{C as x,a as u,b as p,c as m,d as he}from"./card-BInHG3Zt.js";import{u as ue,B as c}from"./index-CN1IIGNT.js";import{I as H}from"./input-C5aoutXU.js";import{n as I,o as pe,e as je,r as ge,s as L,u as fe,F as $,l as F,i as Ne,j as V,d as ye,v as ve,w as be,f as _e,D as O,k as we,x as Ce,h as Se}from"./vendor-utils-3hQanHZm.js";import{R as b,B as R,c as z,X as k,Y as K,T as _,b as T,C as P,P as De,a as ze,L as ke,S as Ke,e as Me,d as Fe}from"./vendor-charts-2uieviVG.js";import{S as Re,d as Te,g as Pe,c as Le}from"./StockAnalysisDialog-Bwyn-n6i.js";import{f as W,a as X,g as Y,b as J}from"./format-CUqWL-d1.js";import"./vendor-radix-aGPdNwig.js";const Z=["#ef4444","#f97316","#eab308","#22c55e","#14b8a6","#3b82f6","#8b5cf6","#ec4899"],ee=["#dc2626","#e11d48","#f43f5e","#fb7185","#fda4af"];function $e({stocks:r,top20Full:h=[]}){const w=d.useMemo(()=>r.slice(0,15).map((t,a)=>{var l;return{name:`${((l=t.name)==null?void 0:l.slice(0,4))||t.symbol}`,symbol:t.symbol,turnover_rate:t.turnover_rate,rank:t.turnover_rank,fill:ee[Math.min(a,ee.length-1)]}}).reverse(),[r]),y=d.useMemo(()=>{const t={};return r.forEach(a=>{const l=a.industry||"其他";t[l]=(t[l]||0)+1}),Object.entries(t).map(([a,l])=>({name:a,value:l})).sort((a,l)=>l.value-a.value).slice(0,8)},[r]),C=d.useMemo(()=>(h.length?h:r).map(a=>({symbol:a.symbol,name:a.name,turnover_rate:a.turnover_rate,change_percent:a.change_percent||0,is_limit_up:a.is_limit_up,volume:a.volume||0,size:Math.sqrt((a.volume||1e3)/1e3)*3})),[r,h]),g=d.useMemo(()=>r.map(t=>{var a;return{name:`${((a=t.name)==null?void 0:a.slice(0,4))||t.symbol}`,symbol:t.symbol,amount:(t.volume||0)*(t.close_price||0)*1e3/1e8,rank:t.turnover_rank}}).sort((t,a)=>a.amount-t.amount).slice(0,10).reverse(),[r]),A=d.useMemo(()=>{const t={"開盤 (09:00-09:05)":[],"早盤 (09:05-10:00)":[],"盤中 (10:00-12:00)":[],"尾盤 (12:00-13:30)":[],未知:[]};return r.forEach(a=>{const l=a.first_limit_time;l?l<="09:05"?t["開盤 (09:00-09:05)"].push(a):l<="10:00"?t["早盤 (09:05-10:00)"].push(a):l<="12:00"?t["盤中 (10:00-12:00)"].push(a):t["尾盤 (12:00-13:30)"].push(a):t.未知.push(a)}),Object.entries(t).filter(([a,l])=>l.length>0).map(([a,l])=>({name:a,count:l.length,stocks:l.map(o=>o.symbol).join(", ")}))},[r]),S=d.useMemo(()=>{const t={};return r.forEach(a=>{const l=a.limit_up_type||"未知";t[l]=(t[l]||0)+1}),Object.entries(t).map(([a,l])=>({name:a,value:l}))},[r]);return r.length===0?null:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(x,{className:"lg:col-span-2",children:[e.jsx(u,{className:"pb-2",children:e.jsxs(p,{className:"text-sm flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"})," 周轉率排名分布（漸層紅色=排名越前）"]})}),e.jsx(m,{children:e.jsx(b,{width:"100%",height:280,children:e.jsxs(R,{data:w,layout:"vertical",margin:{left:10,right:30},children:[e.jsx(z,{strokeDasharray:"3 3",opacity:.3,horizontal:!1}),e.jsx(k,{type:"number",tick:{fontSize:10},unit:"%"}),e.jsx(K,{dataKey:"name",type:"category",tick:{fontSize:10},width:50}),e.jsx(_,{content:({payload:t})=>{var a;if(t&&t.length){const l=t[0].payload;return e.jsxs("div",{className:"bg-popover p-2 rounded shadow text-xs border",children:[e.jsxs("div",{className:"font-bold",children:[l.symbol," - 排名第 ",l.rank]}),e.jsxs("div",{children:["周轉率: ",(a=l.turnover_rate)==null?void 0:a.toFixed(2),"%"]})]})}return null}}),e.jsx(T,{dataKey:"turnover_rate",radius:[0,4,4,0],children:w.map((t,a)=>e.jsx(P,{fill:t.fill},a))})]})})})]}),e.jsxs(x,{children:[e.jsx(u,{className:"pb-2",children:e.jsxs(p,{className:"text-sm flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"})," 產業分布"]})}),e.jsx(m,{children:y.length>0?e.jsx(b,{width:"100%",height:280,children:e.jsxs(De,{children:[e.jsx(ze,{data:y,dataKey:"value",nameKey:"name",cx:"50%",cy:"40%",outerRadius:65,label:({percent:t})=>`${(t*100).toFixed(0)}%`,labelLine:!1,children:y.map((t,a)=>e.jsx(P,{fill:Z[a%Z.length]},a))}),e.jsx(_,{formatter:(t,a)=>[`${t} 檔`,a]}),e.jsx(ke,{layout:"horizontal",verticalAlign:"bottom",align:"center",wrapperStyle:{fontSize:"10px",paddingTop:"8px"},formatter:t=>t.length>6?t.slice(0,6)+"…":t})]})}):e.jsx("div",{className:"h-[280px] flex items-center justify-center text-muted-foreground text-sm",children:"無資料"})})]}),e.jsxs(x,{className:"lg:col-span-2",children:[e.jsx(u,{className:"pb-2",children:e.jsxs(p,{className:"text-sm flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"})," 周轉率 vs 漲幅（前100名）"]})}),e.jsx(m,{children:e.jsx(b,{width:"100%",height:300,children:e.jsxs(Ke,{margin:{bottom:30,left:10,right:20,top:10},children:[e.jsx(z,{strokeDasharray:"3 3",opacity:.3}),e.jsx(k,{dataKey:"turnover_rate",name:"周轉率",unit:"%",tick:{fontSize:10},label:{value:"周轉率(%)",position:"bottom",fontSize:10,offset:10}}),e.jsx(K,{dataKey:"change_percent",name:"漲幅",unit:"%",tick:{fontSize:10},label:{value:"漲幅(%)",angle:-90,position:"left",fontSize:10},domain:[-5,12]}),e.jsx(Me,{y:9.9,stroke:"#ef4444",strokeDasharray:"5 5",label:{value:"漲停線 9.9%",fontSize:9,fill:"#ef4444"}}),e.jsx(_,{content:({payload:t})=>{var a,l;if(t&&t.length){const o=t[0].payload;return e.jsxs("div",{className:"bg-popover p-2 rounded shadow text-xs border",children:[e.jsxs("div",{className:"font-bold",children:[o.symbol," ",o.name]}),e.jsxs("div",{children:["周轉率: ",(a=o.turnover_rate)==null?void 0:a.toFixed(2),"%"]}),e.jsxs("div",{children:["漲幅: ",(l=o.change_percent)==null?void 0:l.toFixed(2),"%"]}),e.jsx("div",{children:o.is_limit_up?"漲停":""})]})}return null}}),e.jsx(Fe,{data:C,children:C.map((t,a)=>e.jsx(P,{fill:t.is_limit_up?"#ef4444":"#3b82f6",r:t.size},a))})]})})})]}),e.jsxs(x,{children:[e.jsx(u,{className:"pb-2",children:e.jsxs(p,{className:"text-sm flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"})," 成交金額排行"]})}),e.jsx(m,{children:e.jsx(b,{width:"100%",height:280,children:e.jsxs(R,{data:g,layout:"vertical",margin:{left:10,right:30},children:[e.jsx(z,{strokeDasharray:"3 3",opacity:.3,horizontal:!1}),e.jsx(k,{type:"number",tick:{fontSize:10},unit:"億"}),e.jsx(K,{dataKey:"name",type:"category",tick:{fontSize:10},width:50}),e.jsx(_,{content:({payload:t})=>{var a;if(t&&t.length){const l=t[0].payload,o=g.length-g.indexOf(l)-1;return e.jsxs("div",{className:"bg-popover p-2 rounded shadow text-xs border",children:[e.jsxs("div",{className:"font-bold flex items-center gap-1",children:[o<=2&&e.jsx(L,{className:`w-3 h-3 ${o===0?"text-yellow-500":o===1?"text-gray-400":"text-amber-600"}`}),l.symbol]}),e.jsxs("div",{children:["成交金額: ",(a=l.amount)==null?void 0:a.toFixed(2)," 億元"]})]})}return null}}),e.jsx(T,{dataKey:"amount",fill:"#22c55e",radius:[0,4,4,0],children:g.map((t,a)=>{const l=g.length-a-1,o=l===0?"#fbbf24":l===1?"#9ca3af":l===2?"#d97706":"#22c55e";return e.jsx(P,{fill:o},a)})})]})})})]}),e.jsxs(x,{className:"lg:col-span-2",children:[e.jsx(u,{className:"pb-2",children:e.jsxs(p,{className:"text-sm flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"})," 漲停時間分布"]})}),e.jsx(m,{children:e.jsx(b,{width:"100%",height:200,children:e.jsxs(R,{data:A,margin:{bottom:20},children:[e.jsx(z,{strokeDasharray:"3 3",opacity:.3}),e.jsx(k,{dataKey:"name",tick:{fontSize:9},angle:-15,textAnchor:"end"}),e.jsx(K,{tick:{fontSize:10},allowDecimals:!1}),e.jsx(_,{content:({payload:t})=>{if(t&&t.length){const a=t[0].payload;return e.jsxs("div",{className:"bg-popover p-2 rounded shadow text-xs border max-w-xs",children:[e.jsx("div",{className:"font-bold",children:a.name}),e.jsxs("div",{children:["數量: ",a.count," 檔"]}),e.jsx("div",{className:"text-muted-foreground",children:a.stocks})]})}return null}}),e.jsx(T,{dataKey:"count",fill:"#f97316",radius:[4,4,0,0]})]})})})]}),e.jsxs(x,{children:[e.jsx(u,{className:"pb-2",children:e.jsxs(p,{className:"text-sm flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 text-red-500"})," 漲停類型"]})}),e.jsx(m,{children:S.length>0?e.jsx(b,{width:"100%",height:200,children:e.jsxs(R,{data:S,layout:"vertical",children:[e.jsx(z,{strokeDasharray:"3 3",opacity:.3,horizontal:!1}),e.jsx(k,{type:"number",tick:{fontSize:10},allowDecimals:!1}),e.jsx(K,{dataKey:"name",type:"category",tick:{fontSize:10},width:50}),e.jsx(_,{}),e.jsx(T,{dataKey:"value",fill:"#ef4444",radius:[0,4,4,0]})]})}):e.jsx("div",{className:"h-[200px] flex items-center justify-center text-muted-foreground text-sm",children:"無資料"})})]})]})}function se(r){return r===1?e.jsx(L,{className:"w-4 h-4 text-yellow-500"}):r===2?e.jsx(L,{className:"w-4 h-4 text-gray-400"}):r===3?e.jsx(L,{className:"w-4 h-4 text-amber-600"}):null}function Ae(r){const h=[];return r.limit_up_type==="一字板"&&h.push(e.jsx($,{className:"w-3 h-3 text-red-500"},"flame")),r.consecutive_up_days&&r.consecutive_up_days>=2&&h.push(e.jsx("span",{className:"flex items-center",children:Array.from({length:Math.min(r.consecutive_up_days,5)}).map((w,y)=>e.jsx(Se,{className:"w-3 h-3 text-amber-500 fill-amber-500"},y))},"stars")),h}function We(){const{queryDate:r,setQueryDate:h}=ue(),[w,y]=d.useState([{id:"turnover_rank",desc:!1}]),[C,g]=d.useState(""),[A,S]=d.useState(!1),[t,a]=d.useState(null),[l,o]=d.useState(!1),q=(s,n)=>{a({symbol:s,name:n}),o(!0)},te=()=>{o(!1),a(null)},{data:D}=B({queryKey:["tradingDate"],queryFn:Pe});d.useEffect(()=>{D!=null&&D.latest_trading_day&&!r&&h(D.latest_trading_day)},[D,r,h]);const{data:j,isLoading:ae,error:le,refetch:ne}=B({queryKey:["top20LimitUp",r],queryFn:()=>Le(r),enabled:!!r}),f=j==null?void 0:j.stats,v=(j==null?void 0:j.items)||[],U=(j==null?void 0:j.top20_full_list)||[],M=s=>{const n=new Date;let i=new Date;switch(s){case"today":i=n;break;case"yesterday":i.setDate(n.getDate()-1);break;case"lastWeek":i.setDate(n.getDate()-7);break;case"lastMonth":i.setMonth(n.getMonth()-1);break}h(i.toISOString().split("T")[0])},E=s=>{if(v.length===0)return;const n=v.map(i=>({排名:i.turnover_rank,代號:i.symbol,名稱:i.name||"",產業:i.industry||"",收盤價:i.close_price||0,漲幅:i.change_percent||0,周轉率:i.turnover_rate,成交量:i.volume||0,流通股數:i.float_shares||0,漲停類型:i.limit_up_type||"",封單量:i.seal_volume||0,開板次數:i.open_count||0,連續上漲:i.consecutive_up_days||0}));Te(s,n,`top20_limit_up_${r}`)},re=d.useMemo(()=>[{accessorKey:"turnover_rank",header:({column:s})=>e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>s.toggleSorting(),children:["排名 ",e.jsx(F,{className:"ml-1 h-3 w-3"})]}),cell:({row:s})=>{const n=s.original.turnover_rank,i=se(n);return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:`inline-flex items-center justify-center w-7 h-7 rounded-full text-xs font-medium ${n<=3?"bg-gradient-to-br from-yellow-400 to-orange-500 text-white":n<=10?"bg-orange-100 text-orange-700":"bg-muted"}`,children:n}),i&&e.jsx("span",{className:"ml-1",children:i})]})}},{accessorKey:"symbol",header:"代號",cell:({row:s})=>e.jsx("span",{className:"font-mono font-medium",children:s.original.symbol})},{accessorKey:"name",header:"名稱",cell:({row:s})=>{const n=Ae(s.original);return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:s.original.name}),n.map((i,ie)=>e.jsx("span",{children:i},ie))]})}},{accessorKey:"industry",header:"產業",cell:({row:s})=>e.jsx("span",{className:"text-xs text-muted-foreground",children:s.original.industry||"-"})},{accessorKey:"close_price",header:({column:s})=>e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>s.toggleSorting(),children:["收盤價 ",e.jsx(F,{className:"ml-1 h-3 w-3"})]}),cell:({row:s})=>e.jsx("span",{className:"font-mono",children:W(s.original.close_price)})},{accessorKey:"change_percent",header:({column:s})=>e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>s.toggleSorting(),children:["漲幅 ",e.jsx(F,{className:"ml-1 h-3 w-3"})]}),cell:({row:s})=>e.jsx("span",{className:`font-mono font-bold ${Y(s.original.change_percent)}`,children:X(s.original.change_percent)})},{accessorKey:"turnover_rate",header:({column:s})=>e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>s.toggleSorting(),children:["周轉率 ",e.jsx(F,{className:"ml-1 h-3 w-3"})]}),cell:({row:s})=>{var n;return e.jsxs("span",{className:"font-mono font-bold text-blue-500",children:[(n=s.original.turnover_rate)==null?void 0:n.toFixed(2),"%"]})}},{accessorKey:"volume",header:"成交量",cell:({row:s})=>e.jsx("span",{className:"font-mono text-sm",children:J(s.original.volume)})},{accessorKey:"float_shares",header:"流通股數",cell:({row:s})=>{var n;return e.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[(n=s.original.float_shares)==null?void 0:n.toFixed(0),"萬"]})}},{accessorKey:"limit_up_type",header:"類型",cell:({row:s})=>{const n=s.original.limit_up_type;return n?e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${n==="一字板"?"bg-red-500 text-white":n==="秒板"?"bg-orange-500 text-white":"bg-muted"}`,children:n}):"-"}},{accessorKey:"seal_volume",header:"封單量",cell:({row:s})=>e.jsx("span",{className:"font-mono text-sm",children:s.original.seal_volume?J(s.original.seal_volume):"-"})},{accessorKey:"open_count",header:"開板",cell:({row:s})=>e.jsx("span",{className:`text-sm ${(s.original.open_count||0)===0?"text-green-500":""}`,children:s.original.open_count??"-"})},{accessorKey:"consecutive_up_days",header:"連漲",cell:({row:s})=>{const n=s.original.consecutive_up_days;return n&&n>0?e.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-red-500/10 text-red-500 font-medium",children:[n,"天"]}):"-"}},{id:"actions",header:"操作",cell:({row:s})=>e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>q(s.original.symbol,s.original.name),className:"h-8 w-8 p-0",title:"查看K線圖",children:e.jsx(Ne,{className:"h-4 w-4"})})}],[q]),N=ce({data:v,columns:re,state:{sorting:w,globalFilter:C},onSortingChange:y,onGlobalFilterChange:g,getCoreRowModel:me(),getSortedRowModel:xe(),getFilteredRowModel:de(),getPaginationRowModel:oe(),initialState:{pagination:{pageSize:20}}});return e.jsxs("div",{className:"container mx-auto py-6 px-4 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(Q,{to:"/",children:e.jsx(V,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(ye,{className:"w-7 h-7 text-yellow-500"}),"前200周轉漲停榜"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"當日周轉率排名前200名且達到漲停（≥9.9%）的股票"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(H,{type:"date",value:r,onChange:s=>h(s.target.value),className:"w-40"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>M("today"),children:"今天"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>M("yesterday"),children:"昨天"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>M("lastWeek"),children:"上週"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>M("lastMonth"),children:"上月"})]})]})]}),f&&e.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-5",children:[e.jsxs(x,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"周轉率前200名"})}),e.jsxs(m,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[f.top20_count," 檔"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"當日周轉率排名前200的股票"})]})]}),e.jsxs(x,{className:"border-red-500/50 bg-red-500/5",children:[e.jsx(u,{className:"pb-2",children:e.jsx(p,{className:"text-sm font-medium text-red-500",children:"前200中漲停股"})}),e.jsxs(m,{children:[e.jsxs("div",{className:"text-2xl font-bold text-red-500",children:[f.limit_up_count," 檔"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"達到漲停的股票數"})]})]}),e.jsxs(x,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"漲停占比"})}),e.jsxs(m,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[f.limit_up_count,"/",f.top20_count," = ",f.limit_up_ratio,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"符合條件的股票占比"})]})]}),e.jsxs(x,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"平均周轉率"})}),e.jsxs(m,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-500",children:[f.avg_turnover_rate_limit_up,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"符合條件股票的平均值"})]})]}),e.jsxs(x,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"總成交金額"})}),e.jsxs(m,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[f.total_amount_limit_up," 億"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"符合條件股票的總成交額"})]})]})]}),le&&e.jsx(x,{className:"border-destructive",children:e.jsxs(m,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(be,{className:"w-5 h-5"}),e.jsx("span",{children:"資料載入失敗，請重試"})]}),e.jsx(c,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>ne(),children:"重新載入"})]})}),v.length>0&&e.jsx($e,{stocks:v,top20Full:U}),e.jsxs(x,{children:[e.jsx(u,{className:"pb-2",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs(p,{className:"text-lg flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5 text-orange-500"}),"符合條件股票清單"]}),e.jsxs(he,{children:["共 ",v.length," 檔股票符合條件（",r,"）"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(H,{placeholder:"搜尋代號或名稱...",value:C,onChange:s=>g(s.target.value),className:"pl-8 w-48"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>E("csv"),children:[e.jsx(O,{className:"w-4 h-4 mr-1"})," CSV"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>E("excel"),children:[e.jsx(O,{className:"w-4 h-4 mr-1"})," Excel"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>E("json"),children:[e.jsx(O,{className:"w-4 h-4 mr-1"})," JSON"]})]})]})]})}),e.jsx(m,{className:"p-0",children:ae?e.jsx("div",{className:"py-20 text-center text-muted-foreground animate-pulse",children:"載入中..."}):v.length===0?e.jsxs("div",{className:"py-16 px-8 text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-6xl mb-4 text-muted-foreground",children:e.jsx(I,{className:"w-16 h-16"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"今日周轉率前200名中無漲停股票"}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-4 max-w-md mx-auto",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-2",children:"可能原因："}),e.jsxs("ul",{className:"list-disc list-inside text-left",children:[e.jsx("li",{children:"今日盤勢較弱，高周轉股票未達漲停"}),e.jsx("li",{children:"前200名股票多為下跌或小漲"}),e.jsx("li",{children:"資料尚未更新完成"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-2",children:"建議："}),e.jsxs("ul",{className:"list-disc list-inside text-left",children:[e.jsx("li",{children:"查詢其他日期"}),e.jsx("li",{children:"展開查看完整前200名名單"}),e.jsx("li",{children:"前往「高周轉漲停」頁面查看更多資料"})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-2 mt-6",children:[e.jsxs(c,{variant:"outline",onClick:()=>S(!0),children:[e.jsx(I,{className:"w-4 h-4 mr-1"})," 查看完整前200名"]}),e.jsx(c,{asChild:!0,children:e.jsx(Q,{to:"/turnover",children:"前往高周轉漲停"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/50 border-y",children:N.getHeaderGroups().map(s=>e.jsx("tr",{children:s.headers.map(n=>e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium",children:G(n.column.columnDef.header,n.getContext())},n.id))},s.id))}),e.jsx("tbody",{className:"divide-y",children:N.getRowModel().rows.map(s=>e.jsx("tr",{className:"hover:bg-muted/30",children:s.getVisibleCells().map(n=>e.jsx("td",{className:"px-3 py-3",children:G(n.column.columnDef.cell,n.getContext())},n.id))},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["第 ",N.getState().pagination.pageIndex+1," 頁， 共 ",N.getPageCount()," 頁"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>N.previousPage(),disabled:!N.getCanPreviousPage(),children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>N.nextPage(),disabled:!N.getCanNextPage(),children:e.jsx(we,{className:"w-4 h-4"})})]})]})]})})]}),e.jsxs("details",{className:"border rounded-lg",open:A,onToggle:s=>S(s.target.open),children:[e.jsxs("summary",{className:"p-4 cursor-pointer hover:bg-muted/50 font-medium flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4"})," 查看完整周轉率前200名名單（包含未漲停）"]}),e.jsx("div",{className:"p-4 pt-0 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/50 border-y",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs",children:"排名"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs",children:"代號"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs",children:"名稱"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs",children:"產業"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs",children:"收盤價"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs",children:"漲幅"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs",children:"周轉率"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs",children:"漲停"})]})}),e.jsx("tbody",{className:"divide-y",children:U.map(s=>{var n;return e.jsxs("tr",{className:`hover:bg-muted/30 ${s.is_limit_up?"bg-orange-500/5":""}`,children:[e.jsxs("td",{className:"px-3 py-2",children:[e.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 rounded-full text-xs ${s.turnover_rank<=3?"bg-yellow-500 text-white":s.turnover_rank<=10?"bg-orange-100 text-orange-700":"bg-muted"}`,children:s.turnover_rank}),se(s.turnover_rank)]}),e.jsx("td",{className:"px-3 py-2 font-mono",children:s.symbol}),e.jsx("td",{className:"px-3 py-2",children:s.name}),e.jsx("td",{className:"px-3 py-2 text-xs text-muted-foreground",children:s.industry||"-"}),e.jsx("td",{className:"px-3 py-2 font-mono",children:W(s.close_price)}),e.jsx("td",{className:`px-3 py-2 font-mono ${Y(s.change_percent)}`,children:X(s.change_percent)}),e.jsxs("td",{className:"px-3 py-2 font-mono text-blue-500",children:[(n=s.turnover_rate)==null?void 0:n.toFixed(2),"%"]}),e.jsx("td",{className:"px-3 py-2",children:s.is_limit_up?e.jsxs("span",{className:"px-2 py-0.5 rounded bg-red-500 text-white text-xs inline-flex items-center gap-1",children:["漲停 ",e.jsx($,{className:"w-3 h-3"})]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"-"})})]},s.symbol)})})]})})]}),e.jsx(Re,{open:l,onClose:te,symbol:(t==null?void 0:t.symbol)||null,name:t==null?void 0:t.name})]})}export{We as Top20TurnoverLimitUpPage};
